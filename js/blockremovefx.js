"use strict";
define(["colors", "sprites", "dir"], 
	function (Colors, Sprites, Dir) {

	var expSpriteData = "v1.0:111111111100100000000100100000000100100000000100100011000100100011000100100000000100100000000100100000000100111111111100000000000000000000000000111111111100100000000100100000000100100111100100100100100100100100100100100111100100100000000100100000000100111111111100000000000000000000000000111111111100100000000100101111110100101000010100101000010100101000010100101000010100101111110100100000000100111111111100000000000000000000000000111111111100111111111100110000001100110000001100110000001100110000001100110000001100110000001100111111111100111111111100000000000000000000000000111111111100100000000100101111110100101000010100101000010100101000010100101000010100101111110100100000000100111111111100000000000000000000000000111111111100100000000100100000000100100111100100100100100100100100100100100111100100100000000100100000000100111111111100000000000000000000000000111111111100100000000100100000000100100000000100100011000100100011000100100000000100100000000100100000000100111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
	var sprite = Sprites.loadFramesFromData(expSpriteData);

	//compatible with Explosion
	var BlockRemoveFx = function (dir, type, pos) {
		this.dir = dir;
		this.type = type;
		this.pos = pos;
		this.age = 0;
		this.maxAge = 49;
	  this.live = true;

	  this.update = function () {
	  	this.age++;
	  	if (this.age > this.maxAge)
	  		this.live = false;
	  };

	  this.draw = function (painter) {
		  if (this.live) {
				var frame = Math.floor(7 * this.age / this.maxAge);
				var color = Colors.good;
				painter.drawSprite2(this.pos.x, this.pos.y, 10, 
					this.dir, sprite[frame], color);
			}
		}
	};
	return BlockRemoveFx;
});